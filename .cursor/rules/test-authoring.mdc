---
description: Technical standards for creating new Selenium tests and Page Objects.
globs: ["tests/**/*.py", "src/pages/**/*.py"]
---

# Technical Authoring Standards

Follow these strict technical requirements when expanding the suite:

### 1. Locator Stability
- One element, one locator. Do not provide multiple locator options (backup selectors) for a single element. 
- If a locator changes in the UI, the test should fail so we can identify the change. 
- Prefer ID, or unique CSS selectors over brittle XPaths.

### 2. Setup and Teardown
- Always implement proper setup and teardown logic using PyTest fixtures.
- Ensure the application state is cleaned up after each test execution to maintain test isolation.
- **New class, new browser**: Each test class gets its own browser instance (via `init_driver`).
- **New class, new login**: Logged-in fixtures are class-scoped; one login per class. If a test needs a fresh login (e.g. different user or clean session), put it in a different class.

### 3. Autonomous Page Object Updates
- When creating a new test, if an interaction is missing from `src/pages/`, you must automatically create the necessary method.
- You must use the `SeleniumExtended` base class wrappers (e.g., `wait_and_click`) for all new interactions.
- Never use raw driver commands or `time.sleep()`. Unless you have to and there is no better way.

### 4. Descriptive Assertions
- All assertions must include a failure message explaining what was expected vs what was found.

### 5. Text and Message Validation
- Do **not** validate text by checking only one or two words from a phrase or sentence. That is too loose and can produce false positives.
- **Static / unchanging text**: Validate an **exact one-to-one match** of the full expected text (e.g. label, error message, static copy). If the UI shows a fixed string, the test must assert that exact string.
- **Text that varies but the situation is known ahead of time**: Plan for the known cases and assert the exact text for each situation (e.g. different error messages for different validation failures).
- **Text that is partially or fully variable and not fully known**: Use **regular expressions** so the assertion matches the real structure of the text (e.g. "Review submitted. It will appear after moderation." vs a dynamic part). Ensure the regex actually validates the intended patternâ€”not just a couple of words.
- Default to **exact match**. Use regex only when the text is variable or situation-dependent and exact text cannot be asserted. Never rely on "word X and word Y appear somewhere" as a substitute for validating the full message.